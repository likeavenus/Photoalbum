{"version":3,"sources":["components/Popup/styles.module.scss","components/CardsContainer/styles.module.scss","components/Card/styles.module.scss","components/Card/index.js","components/Popup/index.js","components/CardsContainer/index.js","components/UploadFoto/index.js","App.js","reportWebVitals.js","api/index.js","index.js"],"names":["module","exports","Card","imgUrl","description","openCard","className","styles","card","onClick","src","Popup","closeCard","handleClosePopup","useCallback","e","target","tagName","handleKeyDown","key","useEffect","document","addEventListener","removeEventListener","popup","closePopup","CardsContainer","props","useState","isActive","item","popupSettings","setPopupSettings","container","photos","find","map","index","showImg","Upload","onSubmit","preventDefault","type","onChange","onInputChange","ref","fileInput","onButtonClick","uploadingState","App","file","setFile","setUploadError","setUploadingState","useRef","setPhotos","storageRef","firebase","storage","listRef","child","metadata","contentType","fetchData","a","listAll","promise","items","Promise","all","getDownloadURL","then","data","files","console","log","uploadTask","name","put","on","TaskEvent","STATE_CHANGED","error","Error","snapshot","downloadURL","current","parentElement","reset","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.21d19ff2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"styles_popup__2nsB8\",\"closePopup\":\"styles_closePopup__OOVOw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__WhCd4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"styles_card__dkfTq\"};","import React from 'react';\nimport styles from './styles.module.scss';\n\n\nexport const Card = ({ imgUrl, description, openCard }) => {\n    return (\n        <div className={styles.card} onClick={openCard}>\n            <img src={imgUrl} />\n            <p>{description}</p>\n        </div>\n    )\n}","import React, { useEffect, useCallback } from 'react';\nimport styles from './styles.module.scss';\n\nexport const Popup = ({ imgUrl, closeCard }) => {\n   const handleClosePopup = useCallback((e) => {\n      if (e.target.tagName === 'DIV') {\n         closeCard();\n      }\n   }, [closeCard])\n\n   const handleKeyDown = useCallback((e) => {\n      if (e.key === 'Escape') {\n         closeCard();\n      }\n   }, [closeCard]);\n   \n   useEffect(() => {\n      document.addEventListener('keydown', handleKeyDown, false);\n\n      return () => document.removeEventListener('keydown', handleKeyDown, false);\n   });\n\n   return (\n      <div className={styles.popup} onClick={handleClosePopup}>\n         <img src={imgUrl} />\n         <button className={styles.closePopup} onClick={closeCard}>X</button>\n      </div>\n   )\n}","import React, { useState, useEffect } from 'react';\nimport styles from './styles.module.scss';\nimport { Card } from '../Card';\nimport { Popup } from '../Popup';\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nexport const CardsContainer = (props) => {\n   const [popupSettings, setPopupSettings] = useState({\n      isActive: false,\n      item: null\n   });\n\n   const showImg = (item) => {\n      setPopupSettings({\n         isActive: true,\n         item\n      });\n   }\n   const closeImg = () => {\n      setPopupSettings({\n         isActive: false,\n         item: null\n      });\n   }\n\n   return (\n      <section className={styles.container}>\n         {popupSettings.isActive && <Popup imgUrl={props.photos.find((item) => item === popupSettings.item)} closeCard={() => closeImg()} />}\n         {props.photos.map((item, index) => {\n            return <Card key={index} imgUrl={item} openCard={() => showImg(item)} />\n         })}\n      </section>\n   )\n}","import React from 'react';\nimport \"firebase/storage\";\nimport styles from './styles.module.scss';\n\nexport const Upload = (props) => {\n   const handleOnSubmit = (e) => {\n      e.preventDefault();\n   };\n   return (\n      <form onSubmit={handleOnSubmit}>\n         <h3>Загрузите фотографию</h3>\n         <input type=\"file\" onChange={props.onInputChange} ref={props.fileInput} />\n         <button onClick={props.onButtonClick}>Отправить</button>\n         {props.uploadingState && <p>Загрузка</p>}\n      </form>\n   )\n}","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './App.css';\nimport { CardsContainer } from './components/CardsContainer';\nimport { Upload } from './components/UploadFoto';\nimport firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [uploadError, setUploadError] = useState(false);\n  const [uploadingState, setUploadingState] = useState(false);\n  const fileInput = useRef(null);\n  const [photos, setPhotos] = useState([]);\n  \n  const storageRef = firebase.storage().ref();\n  const listRef = storageRef.child('images/');\n  const metadata = {\n    contentType: 'image/jpeg'\n  };\n\n  const fetchData = async () => {\n    const promise = await listRef.listAll();\n    const items = promise.items;\n    return Promise.all(items.map(item => item.getDownloadURL().then((data) => data)));\n  }\n\n  const onInputChange = useCallback((e) => {\n    setFile(null);\n    setFile(e.target.files[0]);\n  }, [setFile]);\n\n  const onButtonClick = () => {\n    if (file) {\n      const uploadTask = storageRef.child(`images/${file.name}`).put(file, metadata);\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, () => {\n        setUploadingState(true);\n      }, (error) => {\n        setUploadError(true);\n        throw new Error(error);\n      }, () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          console.log('File available at', downloadURL);\n          setUploadingState(false);\n          setFile(null);\n          fileInput.current.parentElement.reset();\n        });\n      })\n    }\n  }\n\n  useEffect(() => {\n    fetchData().then(data => setPhotos(data));\n  }, [uploadingState]);\n\n  console.log('=== RENDER ===')\n  return (\n    <div className=\"App\">\n      <Upload file={file} onInputChange={onInputChange} uploadingState={uploadingState} onButtonClick={onButtonClick} fileInput={fileInput} />\n      <CardsContainer photos={photos} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import firebase from \"firebase/app\";\n\nexport const init = () => {\n    const firebaseConfig = {\n        apiKey: \"AIzaSyDcymeDWgOcaAsXDfY9SBZhmOn7744xERM\",\n        authDomain: \"album-c5591.firebaseapp.com\",\n        databaseURL: \"https://album-c5591-default-rtdb.europe-west1.firebasedatabase.app\",\n        projectId: \"album-c5591\",\n        storageBucket: \"album-c5591.appspot.com\",\n        messagingSenderId: \"48004309131\",\n        appId: \"1:48004309131:web:36c50ce064fce365dff48e\",\n        measurementId: \"G-SF3RGPJQPJ\"\n    };\n    if (!firebase.apps.length) {\n        firebase.initializeApp(firebaseConfig);\n    }\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport * as backend from './api';\n\nbackend.init();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}